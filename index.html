<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>hello</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="hanjm&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="hello">
<meta property="og:url" content="https://imhanjm.com/index.html">
<meta property="og:site_name" content="hello">
<meta property="og:description" content="hanjm&apos;s blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hello">
<meta name="twitter:description" content="hanjm&apos;s blog">
    

    
        <link rel="alternate" href="/" title="hello" type="application/atom+xml" />
    

    
        <link rel="icon" href="/css/images/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-97868201-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">hello</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">hanjm</h2>
            <h3 id="title">Golang &amp; Python backend</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Shenzhen, China</span>
            <a id="follow" target="_blank" href="https://github.com/hanjm/">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                14
                <span>文章</span>
            </div>
            <div class="article-info-block">
                14
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/hanjm/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-Go如何精确计算小数-decimal研究" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/08/27/Go如何精确计算小数-decimal研究/">Go如何精确计算小数-Decimal研究</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/08/27/Go如何精确计算小数-decimal研究/">
            <time datetime="2017-08-26T16:00:00.000Z" itemprop="datePublished">2017-08-27</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Go/">Go</a>, <a class="tag-link" href="/tags/decimal/">decimal</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>##1 浮点数为什么不精确<br>先看两个case</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">// case1: 135.90*100 ====</div><div class="line">// float32</div><div class="line">var f1 float32 = 135.90</div><div class="line">fmt.Println(f1 * 100) // output:13589.999</div><div class="line">// float64</div><div class="line">var f2 float64 = 135.90</div><div class="line">fmt.Println(f2 * 100) // output:13590</div></pre></td></tr></table></figure>
<p>浮点数在单精度下, 135.9*100即出现了偏差, 双精度下结果正确.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">// case2: 0.1 add 10 times ===</div><div class="line">// float32</div><div class="line">var f3 float32 = 0</div><div class="line">for i := 0; i &lt; 10; i++ &#123;</div><div class="line">	f3 += 0.1</div><div class="line">&#125;</div><div class="line">fmt.Println(f3) //output:1.0000001</div><div class="line"></div><div class="line">// float64</div><div class="line">var f4 float64 = 0</div><div class="line">for i := 0; i &lt; 10; i++ &#123;</div><div class="line">	f4 += 0.1</div><div class="line">&#125;</div><div class="line">fmt.Println(f4) //output:0.9999999999999999</div></pre></td></tr></table></figure>
<p>0.1加10次, 这下无论是float32和float64都出现了偏差.</p>
<p>为什么呢, Go和大多数语言一样, 使用标准的<a href="https://zh.wikipedia.org/wiki/IEEE_754" target="_blank" rel="external">IEEE754</a>表示浮点数, 0.1使用二进制表示结果是一个无限循环数, 只能舍入后表示, 累加10次之后就会出现偏差.</p>
<p>##2 数据库是怎么做的<br>MySQL提供了decimal(p,d)/numberlic(p,d)类型的定点数表示法, 由p位数字(不包括符号、小数点)组成, 小数点后面有d位数字, 占p+2个字节, 计算性能会比double/float类型弱一些. </p>
<p>##3 Go代码如何实现Decimal<br>在GitHub搜decimal, star数量比较多的是TiDB里的MyDecimal和ithub.com/shopspring/decimal的实现.</p>
<ul>
<li><p>shopspring的Decimal实现比较简单, 思路是使用十进制定点数表示法, 有多少位小数就小数点后移多少位, value保存移之后的整数, exp保存小数点后的数位个数, number=value*10^exp, 因为移小数点后的整数可能很大, 所以这里借用标准包里的math/big表示这个大整数. exp使用了int32, 所以这个包最多能表示小数点后有32个十进制数位的情况.</p>
<p>  Decimal结构体的定义如下</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">// Decimal represents a fixed-point decimal. It is immutable.</div><div class="line">// number = value * 10 ^ exp</div><div class="line">type Decimal struct &#123;</div><div class="line">	value *big.Int</div><div class="line"></div><div class="line">	// NOTE(vadim): this must be an int32, because we cast it to float64 during</div><div class="line">	// calculations. If exp is 64 bit, we might lose precision.</div><div class="line">	// If we cared about being able to represent every possible decimal, we</div><div class="line">	// could make exp a *big.Int but it would hurt performance and numbers</div><div class="line">	// like that are unrealistic.</div><div class="line">	exp int32</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>TiDB里的MyDecimal定义位于<code>github.com/pingcap/tidb/util/types/mydecimal.go</code>, 实现比shopspring的Decimal复杂多了, 也更底层(不依赖math/big), 性能也更好(见下面的benchmark). 其思路是:<br>digitsInt保存数字的整数部分数字个数, digitsFrac保存数字的小数部分数字个数, resultFrac保存计算及序列化时保留至小数点后几位, negative标明数字是否为负数, wordBuf是一个定长的int32数组(长度为9), 数字去掉小数点的主体保存在这里, 一个int32有32个bit, 最大值为(<code>2**31-1</code>)2147483647(10个十进制数), 所以一个int32最多能表示9个十进制数位, 因此wordBuf 最多能容纳9*9个十进制数位.</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">// MyDecimal represents a decimal value.</div><div class="line">type MyDecimal struct &#123;</div><div class="line">	digitsInt int8 // the number of *decimal* digits before the point.</div><div class="line"></div><div class="line">	digitsFrac int8 // the number of decimal digits after the point.</div><div class="line"></div><div class="line">	resultFrac int8 // result fraction digits.</div><div class="line"></div><div class="line">	negative bool</div><div class="line"></div><div class="line">	//  wordBuf is an array of int32 words.</div><div class="line">	// A word is an int32 value can hold 9 digits.(0 &lt;= word &lt; wordBase)</div><div class="line">	wordBuf [maxWordBufLen]int32</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>看看这两种decimal类型在文首的两个case下的结果, 同时跑个分.</p>
<blockquote>
<p>main_test.go</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">package main</div><div class="line"></div><div class="line">import (</div><div class="line">	&quot;testing&quot;</div><div class="line">	&quot;github.com/shopspring/decimal&quot;</div><div class="line">	&quot;github.com/pingcap/tidb/util/types&quot;</div><div class="line">	&quot;log&quot;</div><div class="line">)</div><div class="line"></div><div class="line">var case1String = &quot;135.90&quot;</div><div class="line">var case1Bytes = []byte(case1String)</div><div class="line">var case2String = &quot;0&quot;</div><div class="line">var case2Bytes = []byte(&quot;0&quot;)</div><div class="line"></div><div class="line">func ShopspringDecimalCase1() decimal.Decimal &#123;</div><div class="line">	dec1, err := decimal.NewFromString(case1String)</div><div class="line">	if err != nil &#123;</div><div class="line">		log.Fatal(err)</div><div class="line">	&#125;</div><div class="line">	dec2 := decimal.NewFromFloat(100)</div><div class="line">	dec3 := dec1.Mul(dec2)</div><div class="line">	return dec3</div><div class="line">&#125;</div><div class="line"></div><div class="line">func TidbDecimalCase1() *types.MyDecimal &#123;</div><div class="line">	dec1 := new(types.MyDecimal)</div><div class="line">	err := dec1.FromString(case1Bytes)</div><div class="line">	if err != nil &#123;</div><div class="line">		log.Fatal(err)</div><div class="line">	&#125;</div><div class="line">	dec2 := new(types.MyDecimal).FromInt(100)</div><div class="line">	dec3 := new(types.MyDecimal)</div><div class="line">	err = types.DecimalMul(dec1, dec2, dec3)</div><div class="line">	if err != nil &#123;</div><div class="line">		log.Fatal(err)</div><div class="line">	&#125;</div><div class="line">	return dec3</div><div class="line">&#125;</div><div class="line"></div><div class="line">func ShopspringDecimalCase2() decimal.Decimal &#123;</div><div class="line">	dec1, err := decimal.NewFromString(case2String)</div><div class="line">	if err != nil &#123;</div><div class="line">		log.Fatal(err)</div><div class="line">	&#125;</div><div class="line">	dec2 := decimal.NewFromFloat(0.1)</div><div class="line">	for i := 0; i &lt; 10; i++ &#123;</div><div class="line">		dec1 = dec1.Add(dec2)</div><div class="line">	&#125;</div><div class="line">	return dec1</div><div class="line">&#125;</div><div class="line"></div><div class="line">func TidbDecimalCase2() *types.MyDecimal &#123;</div><div class="line">	dec1 := new(types.MyDecimal)</div><div class="line">	dec1.FromString(case2Bytes)</div><div class="line">	dec2 := new(types.MyDecimal)</div><div class="line">	dec2.FromFloat64(0.1)</div><div class="line">	for i := 0; i &lt; 10; i++ &#123;</div><div class="line">		types.DecimalAdd(dec1, dec2, dec1)</div><div class="line">	&#125;</div><div class="line">	return dec1</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">// case1: 135.90*100 ====</div><div class="line">func BenchmarkShopspringDecimalCase1(b *testing.B) &#123;</div><div class="line">	for i := 0; i &lt; b.N; i++ &#123;</div><div class="line">		ShopspringDecimalCase1()</div><div class="line">	&#125;</div><div class="line">	b.Log(ShopspringDecimalCase1()) // output: 13590</div><div class="line">&#125;</div><div class="line"></div><div class="line">func BenchmarkTidbDecimalCase1(b *testing.B) &#123;</div><div class="line">	for i := 0; i &lt; b.N; i++ &#123;</div><div class="line">		TidbDecimalCase1()</div><div class="line">	&#125;</div><div class="line">	b.Log(TidbDecimalCase1()) //  output: 13590.00</div><div class="line">&#125;</div><div class="line"></div><div class="line">// case2: 0.1 add 10 times ===</div><div class="line">func BenchmarkShopspringDecimalCase2(b *testing.B) &#123;</div><div class="line">	for i := 0; i &lt; b.N; i++ &#123;</div><div class="line">		ShopspringDecimalCase2()</div><div class="line">	&#125;</div><div class="line">	b.Log(ShopspringDecimalCase2()) //  output: 1</div><div class="line">&#125;</div><div class="line"></div><div class="line">func BenchmarkTidbDecimalCase2(b *testing.B) &#123;</div><div class="line">	for i := 0; i &lt; b.N; i++ &#123;</div><div class="line">		TidbDecimalCase2()</div><div class="line">	&#125;</div><div class="line">	b.Log(TidbDecimalCase2()) //  output: 1.0</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">BenchmarkShopspringDecimalCase1-8        2000000               664 ns/op             340 B/op         10 allocs/op</div><div class="line"></div><div class="line">BenchmarkTidbDecimalCase1-8             20000000                99.2 ns/op            48 B/op          1 allocs/op</div><div class="line"></div><div class="line">BenchmarkShopspringDecimalCase2-8         300000              5210 ns/op            4294 B/op        111 allocs/op</div><div class="line"></div><div class="line">BenchmarkTidbDecimalCase2-8              3000000               517 ns/op              83 B/op          3 allocs/op</div></pre></td></tr></table></figure>
<p>可见两种实现在上面两个case下表示准确, TiDB的decimal实现的性能高于shopspring的实现, 堆内存分配次数也更少.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://imhanjm.com/2017/08/27/Go如何精确计算小数-decimal研究/" data-id="cj6vin541000r13ty4xbq4dje" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://imhanjm.com/2017/08/27/Go如何精确计算小数-decimal研究/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://imhanjm.com/2017/08/27/Go如何精确计算小数-decimal研究/">评论</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-DockerContainer下gdb无法正常工作的解决办法" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/08/20/DockerContainer下gdb无法正常工作的解决办法/">DockerContainer下gdb无法正常工作的解决办法</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/08/20/DockerContainer下gdb无法正常工作的解决办法/">
            <time datetime="2017-08-19T16:00:00.000Z" itemprop="datePublished">2017-08-20</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Docker/">Docker</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>昨天想在Mac上使用gdb调试一个Linux下编译的动态链接库, 以正常选项启动一个docker container, 运行gdb却发现如下错误提示.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">warning: Error disabling address space randomization: Operation not permitted</div><div class="line">Cannot create process: Operation not permitted</div><div class="line">During startup program exited with code 127.</div><div class="line">(gdb)</div></pre></td></tr></table></figure>
<p>在google搜索结果里第6个才找到正确答案, <a href="https://www.google.com/search?safe=off&amp;q=docker+gdb+warning%3A+Error+disabling+address+space+randomization%3A+Operation+not+permitted+Cannot+create+process%3A+Operation+not+permitted+During+startup+program+exited+with+code+127&amp;oq=docker+gdb+warning%3A+Error+disabling+address+space+randomization%3A+Operation+not+permitted+Cannot+create+process%3A+Operation+not+permitted+During+startup+program+exited+with+code+127" target="_blank" rel="external">https://www.google.com/search?safe=off&amp;q=docker+gdb+warning%3A+Error+disabling+address+space+randomization%3A+Operation+not+permitted+Cannot+create+process%3A+Operation+not+permitted+During+startup+program+exited+with+code+127&amp;oq=docker+gdb+warning%3A+Error+disabling+address+space+randomization%3A+Operation+not+permitted+Cannot+create+process%3A+Operation+not+permitted+During+startup+program+exited+with+code+127</a>, 原来是docker run中的一个不太常用的选项, docker run –privileged, 加上即可.</p>
<p>于是找官方文档查看此选项的解释, 了解到: 默认docker是以受限模式下运行container, 如不能在container中运行再运行一个docker, 不能访问宿主机上的真实设备, /dev/, gdb无法访问真实的内存设备.<br>&gt;</p>
<blockquote>
<p>Runtime privilege and Linux capabilities</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">--cap-add: Add Linux capabilities</div><div class="line">--cap-drop: Drop Linux capabilities</div><div class="line">--privileged=false: Give extended privileges to this container</div><div class="line">--device=[]: Allows you to run devices inside the container without the --privileged flag.</div></pre></td></tr></table></figure>
<p>By default, Docker containers are “unprivileged” and cannot, for example, run a Docker daemon inside a Docker container. This is because by default a container is not allowed to access any devices, but a “privileged” container is given access to all devices (see the documentation on cgroups devices).</p>
<p>When the operator executes docker run –privileged, Docker will enable access to all devices on the host as well as set some configuration in AppArmor or SELinux to allow the container nearly all the same access to the host as processes running outside containers on the host. Additional information about running with –privileged is available on the Docker Blog.</p>
<p>If you want to limit access to a specific device or devices you can use the –device flag. It allows you to specify one or more devices that will be accessible within the container.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;$ docker run --device=/dev/snd:/dev/snd ...</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://imhanjm.com/2017/08/20/DockerContainer下gdb无法正常工作的解决办法/" data-id="cj6vin543000v13ty7k2djxg0" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://imhanjm.com/2017/08/20/DockerContainer下gdb无法正常工作的解决办法/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://imhanjm.com/2017/08/20/DockerContainer下gdb无法正常工作的解决办法/">评论</a>
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
    </nav>
</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/27/Go如何精确计算小数-decimal研究/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/08/27/Go如何精确计算小数-decimal研究/" class="title">Go如何精确计算小数-Decimal研究</a></p>
                            <p class="item-date"><time datetime="2017-08-26T16:00:00.000Z" itemprop="datePublished">2017-08-27</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/20/DockerContainer下gdb无法正常工作的解决办法/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/08/20/DockerContainer下gdb无法正常工作的解决办法/" class="title">DockerContainer下gdb无法正常工作的解决办法</a></p>
                            <p class="item-date"><time datetime="2017-08-19T16:00:00.000Z" itemprop="datePublished">2017-08-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/07/02/Go sync.Pool slice benchmark/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/07/02/Go sync.Pool slice benchmark/" class="title">Go sync.Pool Slice Benchmark</a></p>
                            <p class="item-date"><time datetime="2017-07-01T16:00:00.000Z" itemprop="datePublished">2017-07-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/06/24/Go最佳实践/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/06/24/Go最佳实践/" class="title">Go最佳实践</a></p>
                            <p class="item-date"><time datetime="2017-06-23T16:00:00.000Z" itemprop="datePublished">2017-06-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/05/19/Go logger 日志实践/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/05/19/Go logger 日志实践/" class="title">GO Logger 日志实践</a></p>
                            <p class="item-date"><time datetime="2017-05-18T16:00:00.000Z" itemprop="datePublished">2017-05-19</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cool-tools/">Cool tools</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go/">Go</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Macos/">Macos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bench/">bench</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/benchmark/">benchmark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decimal/">decimal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/log/">log</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/连接池/">连接池</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Cool-tools/" style="font-size: 15px;">Cool tools</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Go/" style="font-size: 20px;">Go</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Macos/" style="font-size: 10px;">Macos</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/bench/" style="font-size: 10px;">bench</a> <a href="/tags/benchmark/" style="font-size: 10px;">benchmark</a> <a href="/tags/decimal/" style="font-size: 10px;">decimal</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/架构/" style="font-size: 10px;">架构</a> <a href="/tags/连接池/" style="font-size: 10px;">连接池</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="">(一些有趣的博客)</a>
                    </li>
                
                    <li>
                        <a href="https://taozj.org/201612/study-conclusion-stage.html">taozj</a>
                    </li>
                
                    <li>
                        <a href="http://lanlingzi.cn/">lanlingzi</a>
                    </li>
                
                    <li>
                        <a href="http://colobu.com/">鸟窝</a>
                    </li>
                
                    <li>
                        <a href="http://liaoph.com/">liaoph</a>
                    </li>
                
                    <li>
                        <a href="http://liyangliang.me/">liyangliang</a>
                    </li>
                
                    <li>
                        <a href="http://www.ideawu.net/blog/">ideawu</a>
                    </li>
                
                    <li>
                        <a href="http://legendtkl.com/">legendtkl</a>
                    </li>
                
                    <li>
                        <a href="http://blog.csdn.net/v_JULY_v">算法之道</a>
                    </li>
                
                    <li>
                        <a href="https://surmon.me">surmon</a>
                    </li>
                
                    <li>
                        <a href="http://shanshanpt.github.io/">shanshanpt</a>
                    </li>
                
                    <li>
                        <a href="http://www.zddhub.com/">zddhub</a>
                    </li>
                
                    <li>
                        <a href="http://luodw.cc/">luodw</a>
                    </li>
                
                    <li>
                        <a href="http://zenlife.tk/index">TiDB</a>
                    </li>
                
                    <li>
                        <a href="https://xiequan.info/">谢权SELF</a>
                    </li>
                
                    <li>
                        <a href="http://www.songjiayang.com/">songjiayang</a>
                    </li>
                
                    <li>
                        <a href="http://cjting.me/">cjting</a>
                    </li>
                
                    <li>
                        <a href="http://kingname.info/">kingname</a>
                    </li>
                
                    <li>
                        <a href="https://mritd.me/">漠然</a>
                    </li>
                
                    <li>
                        <a href="http://blog.xiayf.cn/gitbook/tech-note">xiayf</a>
                    </li>
                
                    <li>
                        <a href="https://www.40huo.cn/">40huo</a>
                    </li>
                
                    <li>
                        <a href="https://www.nosuchfield.com/">nosuchfield</a>
                    </li>
                
                    <li>
                        <a href="http://holys.im/">holys</a>
                    </li>
                
                    <li>
                        <a href="https://icymind.com/">icymind</a>
                    </li>
                
                    <li>
                        <a href="http://hackjutsu.com/">hackjutsu</a>
                    </li>
                
                    <li>
                        <a href="http://xcatliu.com/">流浪小猫</a>
                    </li>
                
                    <li>
                        <a href="http://xielong.me/">谢龙</a>
                    </li>
                
                    <li>
                        <a href="https://github.com/jiajunhuang/blog/blob/master/README.md">Jiajun</a>
                    </li>
                
                    <li>
                        <a href="https://weny.name/about/">Weny</a>
                    </li>
                
                    <li>
                        <a href="https://v2fw.com/">v2fw</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 hanjm<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
        this.page.identifier = 'undefined';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'hanjmblog' + '.disqus.com/count.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>